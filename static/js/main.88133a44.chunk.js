(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{298:function(e,t,a){e.exports=a(522)},520:function(e,t,a){},522:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(72),o=a.n(l),i=a(530),c=a(286),s=a(75),u="/home",d="/login",m="/signup",p=r.a.createContext(null),h=a(16),g=a(19),f=a(21),E=a(20),b=a(22),v=r.a.createContext(null),O=function(e){return function(t){return r.a.createElement(v.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},C=v,y=a(102),j=a.n(y),k=(a(349),a(523),a(352),{apiKey:"AIzaSyAXTQNYW2XTtgsg-tEHi_6UBc3szssqJ0c",authDomain:"cookbook-6c67d.firebaseapp.com",databaseURL:"https://cookbook-6c67d.firebaseio.com",projectId:"cookbook-6c67d",storageBucket:"cookbook-6c67d.appspot.com",messagingSenderId:"855049344402"}),S=function e(){var t=this;Object(h.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getCurrentUser=function(){return t.auth.currentUser},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.pushData=function(e,a){return t.db.ref(e).push(a)},this.updateData=function(e,a){return t.db.ref(e).update(a)},this.removeData=function(e){return t.db.ref(e).remove()},this.getDefaultImg=function(){t.storage.ref().child("image.png").getDownloadURL().then(function(e){return e}).catch(function(e){switch(e.code){case"storage/object_not_found":console.log("File doesn't exist");break;case"storage/unauthorized":console.log("User doesn't have permission to access the object");break;case"storage/canceled":console.log("User canceled the upload");break;case"storage/unknown":console.log("Unknown error occurred, inspect the server response")}return""})},console.log("constructor firebase"),j.a.initializeApp(k),this.auth=j.a.auth(),this.db=j.a.database(),this.storage=j.a.storage()},D=function(e){var t=function(t){function a(){var e,t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(f.a)(this,(e=Object(E.a)(a)).call.apply(e,[this].concat(r)))).state={loading:!0,authUser:null},t}return Object(b.a)(a,t),Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){console.log("AUTH CHANGE"),t?e.setState(function(){return{loading:!1,authUser:t}}):e.setState(function(){return{loading:!1,authUser:null}})})}},{key:"componentWillUnmount",value:function(){console.log("authentication unmount"),this.listener()}},{key:"render",value:function(){return r.a.createElement(p.Provider,{value:this.state},r.a.createElement(e,Object.assign({},this.props,{loading:this.state.loading})))}}]),a}(r.a.Component);return O(t)},w=function(e){return function(t){var a=function(a){function n(){return Object(h.a)(this,n),Object(f.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(b.a)(n,a),Object(g.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/")})}},{key:"componentWillUnmount",value:function(){console.log("authorization unmount"),this.listener()}},{key:"render",value:function(){var a=this;return r.a.createElement(p.Consumer,null,function(n){return e(n)?r.a.createElement(t,Object.assign({},a.props,{auth:n})):null})}}]),n}(r.a.Component);return O(a)}},A=a(289),I=a(540),U=a(60),z=a(537),P=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).goLogin=function(){return a.props.history.push(d)},a.goSignUp=function(){return a.props.history.push(m)},a.goHomePage=function(){return a.props.history.push(u)},a.doSignOut=function(){return a.props.firebase.doSignOut()},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("landing mount")}},{key:"render",value:function(){console.log("render land");var e=this.props.auth.authUser;return r.a.createElement("div",null,r.a.createElement("style",null,"\n            body > div,\n            body > div > div,\n            body > div > div > div {\n              height: 100%;\n            }\n          "),r.a.createElement(A.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100%"}},r.a.createElement(A.a.Column,{style:{maxWidth:450}},r.a.createElement(I.a,{as:"h1",color:"blue",textAlign:"center"},r.a.createElement(U.a,{name:"react"}),"\u7df4\u7fd2-\u98df\u8b5c\u7d00\u9304"),e?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u6b61\u8fce\u56de\u4f86~"),r.a.createElement(z.a,{onClick:this.goHomePage},"\u9032\u5165\u4e3b\u9801"),r.a.createElement(z.a,{color:"green",onClick:this.doSignOut},"\u767b\u51fa")):r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{color:"red",onClick:this.goLogin},"\u767b\u5165"),r.a.createElement(z.a,{color:"red",onClick:this.goSignUp},"\u8a3b\u518a")))))}}]),t}(n.PureComponent),x=w(function(e){return!0})(P),M=a(86),T=a(57),B=a(531),W=a(191),_={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},F=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state=_,a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.props.firebase,n=a.state,r=n.username,l=n.email,o=n.passwordOne;t.doCreateUserWithEmailAndPassword(l,o).then(function(e){return t.user(e.user.uid).set({username:r,email:l})}).then(function(){a.setState(Object(M.a)({},_)),a.props.history.push(u)}).catch(function(e){a.setState({error:e})})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,l=e.passwordTwo,o=e.error,i=n!==l||""===n||""===a||""===t;return r.a.createElement("div",null,r.a.createElement("style",null,"\n                    body > div,\n                    body > div > div,\n                    body > div > div > div {\n                    height: 100%;\n                    }\n                "),r.a.createElement(A.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100%"}},r.a.createElement(A.a.Column,{style:{maxWidth:450}},r.a.createElement(B.a,{size:"large",onSubmit:this.onSubmit},r.a.createElement(W.a,null,r.a.createElement(B.a.Input,{fluid:!0,icon:"user",iconPosition:"left",name:"username",value:t,onChange:this.onChange,placeholder:"\u66b1\u7a31"}),r.a.createElement(B.a.Input,{fluid:!0,icon:"mail",iconPosition:"left",name:"email",value:a,onChange:this.onChange,placeholder:"\u4fe1\u7bb1(\u4ee5\u6b64\u70ba\u5e33\u865f)"}),r.a.createElement(B.a.Input,{fluid:!0,type:"password",icon:"lock",iconPosition:"left",name:"passwordOne",value:n,onChange:this.onChange,placeholder:"\u5bc6\u78bc"}),r.a.createElement(B.a.Input,{fluid:!0,type:"password",icon:"lock",iconPosition:"left",name:"passwordTwo",value:l,onChange:this.onChange,placeholder:"\u518d\u6b21\u78ba\u8a8d\u5bc6\u78bc"}),o&&r.a.createElement("p",{style:{color:"red"}},o.message),r.a.createElement(z.a,{fluid:!0,size:"large",color:"teal",type:"submit",disabled:i},"Signup"))))))}}]),t}(n.PureComponent),H=w(function(e){return!0})(F),N={email:"",password:"",error:null},L=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state=N,a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then(function(e){a.setState(Object(M.a)({},N)),a.props.history.push(u)}).catch(function(e){a.setState({error:e})})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.firebase.getCurrentUser()&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error;return this.props.auth.authUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{active:!0,content:"\u5df2\u767b\u5165\uff0c\u70ba\u60a8\u8df3\u8f49"})):r.a.createElement("div",null,r.a.createElement("style",null,"\n                            body > #root,\n                            body > #root > div ,\n                            body > div > div > div {\n                            height: 100%;\n                            }\n                        "),r.a.createElement(A.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100%"}},r.a.createElement(A.a.Column,{style:{maxWidth:450}},r.a.createElement(B.a,{size:"large",onSubmit:this.onSubmit},r.a.createElement(W.a,null,r.a.createElement(B.a.Input,{fluid:!0,icon:"user",iconPosition:"left",name:"email",value:t,onChange:this.onChange,placeholder:"E-mail"}),r.a.createElement(B.a.Input,{fluid:!0,type:"password",icon:"lock",iconPosition:"left",name:"password",value:a,onChange:this.onChange,placeholder:"Password"}),n&&r.a.createElement("p",{style:{color:"red"}},n.message),r.a.createElement(z.a,{fluid:!0,size:"large",color:"teal",type:"submit"},"Login"))))))}}]),t}(n.PureComponent),R=w(function(e){return!0})(L),G=a(101),J=a(536),q=a(541),X=a(538),Y=a(290),K=a(143),Q=r.a.createContext(null),V=function(e){return function(t){return r.a.createElement(Q.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,a))})}},Z=Q,$=function(e){return{isAddBoardOpen:!e.isAddBoardOpen}},ee=function(e){return{isDeleteOpen:!e.isDeleteOpen}},te=V(function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={isSelected:!1},a.select=function(){var e=a.props;(0,e.changeDeleteTarget)(e.id),a.setState(function(e){return{isSelected:!e.isSelected}})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.data,n=e.isDeleteOpen,l=e.toggleCardDetail,o=this.state.isSelected;return r.a.createElement(q.a,{animation:"fade up",duration:800,transitionOnMount:!0},r.a.createElement(X.a.Dimmable,{link:!0,as:J.a,dimmed:n,onClick:n?this.select:function(){return l(t)}},r.a.createElement(Y.a,{src:a.Img||"",style:{height:"290px",width:"290px"}}),r.a.createElement(J.a.Content,null,r.a.createElement(J.a.Header,null,r.a.createElement("span",{className:"right floated"},r.a.createElement(K.a,{color:"orange",basic:!0},a.Spec)),a.Name),r.a.createElement(J.a.Meta,null,a.Date),r.a.createElement(J.a.Description,null,a.Desc)),r.a.createElement(X.a,{active:n},r.a.createElement(U.a,{name:"crosshairs",color:o?"green":"grey",size:"massive"}))))}}]),t}(n.Component)),ae=a(535),ne=a(532),re=a(533),le=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.props.steps?r.a.createElement(re.a.Group,{divided:!0},this.props.steps.map(function(e,t){return r.a.createElement(re.a,{key:t},r.a.createElement(re.a.Content,null,r.a.createElement(re.a.Header,null,t+1),r.a.createElement(re.a.Description,null,e)))})):null}}]),t}(n.Component),oe=a(534),ie=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.materials,t=e.filter(function(e,t){return t%2===0}),a=e.filter(function(e,t){return t%2!==0});return e?r.a.createElement(A.a,{columns:2,divided:!0},r.a.createElement(A.a.Row,null,r.a.createElement(A.a.Column,null,r.a.createElement(oe.a,{bulleted:!0,divided:!0,verticalAlign:"middle"},t.map(function(e,t){return r.a.createElement(oe.a.Item,{key:t},r.a.createElement(oe.a.Content,null,e))}))),r.a.createElement(A.a.Column,null,r.a.createElement(oe.a,{bulleted:!0,divided:!0,verticalAlign:"middle"},a.map(function(e,t){return r.a.createElement(oe.a.Item,{key:t},r.a.createElement(oe.a.Content,null,e))}))))):null}}]),t}(n.Component);ie.defaultProps={materials:[]};var ce,se=V(function(e){var t=e.selectCard,a=e.toggleCardDetail,n=e.toggleAddBoard,l=r.a.createElement(U.a,{name:"close",onClick:a}),o=[{menuItem:"\u6750\u6599",render:function(){return r.a.createElement(ae.a.Pane,null,r.a.createElement(ie,{materials:t.card.Materials}))}},{menuItem:"\u505a\u6cd5",render:function(){return r.a.createElement(ae.a.Pane,null,r.a.createElement(le,{steps:t.card.Steps}))}}];return r.a.createElement(q.a,{animation:"fade left",duration:500,transitionOnMount:!0},r.a.createElement(ne.a,{open:!0,closeIcon:l},r.a.createElement(ne.a.Header,null,t.card.Name||""),r.a.createElement(ne.a.Content,{scrolling:!0},r.a.createElement(Y.a,{src:t.card.Img||"",size:"large",centered:!0,rounded:!0}),r.a.createElement(ae.a,{menu:{secondary:!0,pointing:!0,fluid:!0,widths:2},panes:o})),r.a.createElement(ne.a.Actions,null,r.a.createElement(z.a,{inverted:!0,color:"violet",content:"Edit",onClick:n}))))}),ue=V(function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},a.toggleOpen=function(){return a.setState(function(e){return{visible:!e.visible}})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.toggleFunc;return r.a.createElement(ne.a,{basic:!0,onOpen:this.toggleOpen,onClose:this.toggleOpen,open:this.state.visible,size:"small",trigger:r.a.createElement(z.a,{inverted:!0,color:"red",content:"Cancel"})},r.a.createElement(I.a,{icon:r.a.createElement(U.a,{name:"exclamation",color:"yellow"}),content:"\u78ba\u5b9a\u53d6\u6d88\u55ce?"}),r.a.createElement(ne.a.Actions,null,r.a.createElement(z.a,{basic:!0,inverted:!0,icon:"remove",color:"red",content:"No",onClick:this.toggleOpen}),r.a.createElement(z.a,{basic:!0,inverted:!0,icon:"checkmark",color:"blue",content:"Yes",onClick:e})))}}]),t}(n.Component)),de={img:"",name:"",spec:"",materials:[],steps:[]},me=function(e){function t(e){var a;if(Object(h.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).addMaterial=function(){var e=document.getElementById("foodform").material;e.value&&a.setState(function(t){return{materials:[].concat(Object(G.a)(t.materials),[e.value])}},function(){return e.value=""})},a.removeMaterial=function(e){var t=a.state.materials,n=e.currentTarget.getAttribute("data-val"),r=t.indexOf(n);t.splice(r,1),a.setState({materials:t})},a.addSteps=function(){var e=document.getElementById("foodform").step;e.value&&a.setState(function(t){return{steps:[].concat(Object(G.a)(t.steps),[e.value])}},function(){return e.value=""})},a.removeSteps=function(){return a.setState(function(e){return e.steps.pop(),{steps:e.steps}})},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.uploadImg=function(e){var t=e.target.files;if(t&&t[0]){var n=new FileReader;n.onload=function(e){return a.setState(function(){return{img:e.target.result}})},n.readAsDataURL(t[0])}},a.clearImg=function(){var e=document.getElementById("upload_img");e.type="",e.type="file",a.setState(function(){return{img:""}})},a.goSubmit=function(){var e=a.state,t=e.img,n=e.name,r=e.spec,l=e.materials,o=e.steps,i=a.props,c=i.toggleAddBoard,s=i.firebase,u=i.selectCard,d=s.getCurrentUser().uid,m={Date:(new Date).toLocaleDateString(),Img:t,Name:n,Spec:r,Materials:l,Steps:o};a.isEdit?s.updateData("users/".concat(d,"/food/").concat(u.id),m):s.pushData("users/".concat(d,"/food"),m),c()},a.isEdit=!1,a.props.selectCard.card&&a.props.selectCard.id){var n=a.props.selectCard,r=n.id,l=n.card;a.isEdit=!0,a.selectID=r,a.state={img:l.Img,name:l.Name,spec:l.Spec,materials:l.Materials,steps:l.Steps}}else a.state=de;return a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.setState(function(){return Object(M.a)({},de)})}},{key:"render",value:function(){var e=this,t=this.props.toggleAddBoard,a=this.state,n=a.img,l=a.name,o=a.spec,i=a.materials,c=a.steps,s=""===n||""===l||""===o||0===i.length||0===c.length;return r.a.createElement(q.a,{animation:"fade left",duration:500,transitionOnMount:!0},r.a.createElement(ne.a,{open:!0},r.a.createElement(ne.a.Header,null,this.isEdit?"\u4fee\u6539":"\u65b0\u60f3\u6cd5"),r.a.createElement(ne.a.Content,{scrolling:!0},r.a.createElement(B.a,{id:"foodform",size:"big"},r.a.createElement("input",{id:"upload_img",type:"file",accept:"image/jpeg,image/png",onChange:this.uploadImg,style:{display:"none"}}),n?r.a.createElement(W.a,{basic:!0,textAlign:"center"},r.a.createElement(Y.a,{bordered:!0,rounded:!0,centered:!0,size:"large",src:n}),r.a.createElement(z.a.Group,{size:"medium"},r.a.createElement(z.a,{compact:!0,icon:"x",onClick:this.clearImg}),r.a.createElement(z.a,{compact:!0,icon:"redo alternate",as:"label",htmlFor:"upload_img"}))):r.a.createElement(W.a,{secondary:!0,textAlign:"center",padded:"very"},r.a.createElement(I.a,{icon:"upload",size:"large"}),r.a.createElement(z.a,{as:"label",color:"green",size:"medium",htmlFor:"upload_img",content:"\u4e0a\u50b3\u5716\u7247"})),r.a.createElement(B.a.Group,{widths:"equal"},r.a.createElement(B.a.Input,{name:"name",label:"\u540d\u5b57",placeholder:"\u53d6\u500b\u540d\u5b57\u5427",value:l,onChange:this.handleChange}),r.a.createElement(B.a.Input,{name:"spec",label:"\u985e\u5225",placeholder:"\u662f\u751a\u9ebc\u6599\u7406\u5462",value:o,onChange:this.handleChange})),r.a.createElement(B.a.Input,{label:"\u6750\u6599",name:"material",placeholder:"\u9700\u8981\u4ec0\u9ebc\u5462",icon:r.a.createElement(U.a,{link:!0,color:"pink",name:"plus",onClick:this.addMaterial})}),r.a.createElement(B.a.Field,null,i.map(function(t,a){return r.a.createElement(K.a,{key:a,color:"brown",size:"large"},t,r.a.createElement(U.a,{name:"delete","data-val":t,onClick:e.removeMaterial}))})),r.a.createElement(B.a.Input,{label:"\u505a\u6cd5",name:"step",placeholder:"\u8a72\u600e\u9ebc\u505a\u5462",icon:r.a.createElement(U.a,{link:!0,color:"green",name:"arrow right",onClick:this.addSteps})}),r.a.createElement(re.a.Group,{divided:!0},c.map(function(e,t){return r.a.createElement(re.a,{key:t},r.a.createElement(re.a.Content,null,r.a.createElement(re.a.Header,null,parseInt(t)+1),r.a.createElement(re.a.Description,null,e)))})),0!==c.length?r.a.createElement(z.a,{attached:"bottom",onClick:this.removeSteps},r.a.createElement(U.a,{name:"close",size:"large"})):null)),r.a.createElement(ne.a.Actions,null,r.a.createElement(ue,{toggleFunc:t}),r.a.createElement(z.a,{disabled:!!s,inverted:!0,color:"blue",content:"Save",onClick:this.goSubmit}))))}}]),t}(n.Component),pe=O(V(me)),he=(r.a.createContext(null),V(function(e){return r.a.createElement(q.a,{animation:"fade left",duration:800,transitionOnMount:!0},r.a.createElement(z.a,{icon:!0,circular:!0,id:"add_board_btn",size:"huge",color:"blue",onClick:e.toggleAddBoard},r.a.createElement(U.a,{name:"plus",size:"large"})))})),ge=V(function(e){return r.a.createElement(q.a,{animation:"fade left",duration:800,transitionOnMount:!0},r.a.createElement(z.a,{icon:!0,circular:!0,id:"delete_btn",size:"huge",color:"red",onClick:e.toggleDelete},r.a.createElement(U.a,{name:"trash alternate",size:"large"})))}),fe=V(function(e){return r.a.createElement(q.a,{animation:"swing up",duration:800,transitionOnMount:!0},r.a.createElement("div",{id:"check_delete_btns"},r.a.createElement(z.a,{icon:!0,circular:!0,size:"huge",color:"red",onClick:e.toggleDelete},r.a.createElement(U.a,{name:"undo",size:"large"})),r.a.createElement("span",{className:"straight_line"}),r.a.createElement(z.a,{icon:!0,circular:!0,size:"huge",color:"blue",onClick:e.deleteData},r.a.createElement(U.a,{name:"trash alternate outline",size:"large"}))))}),Ee=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={isAddBoardOpen:!1,isDeleteOpen:!1,isCardDetailOpen:!1,selectID:"",deleteTarget:[]},a.toggleCardDetail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.setState(function(t){return{isCardDetailOpen:!t.isCardDetailOpen,selectID:e}})},a.changeDeleteTarget=function(e){var t=a.state.deleteTarget,n=t.indexOf(e);n<0?a.setState(function(t){var a=t.deleteTarget;return{deleteTarget:[].concat(Object(G.a)(a),[e])}}):(t.splice(n,1),a.setState({deleteTarget:t}))},a.deleteData=function(){var e=a.state.deleteTarget,t=a.props.firebase,n=t.getCurrentUser().uid;e.map(function(e){return t.removeData("users/".concat(n,"/food/").concat(e))})},a}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isCardDetailOpen,n=t.isAddBoardOpen,l=t.isDeleteOpen,o=t.selectID,i=this.props.data,c=i&&Object.keys(i).map(function(t){return r.a.createElement(te,{key:t,id:t,data:i[t],toggleCardDetail:e.toggleCardDetail})});return r.a.createElement(Z.Provider,{value:{cards:i,selectCard:i?{id:o,card:i[o]}:{},isDeleteOpen:l,toggleAddBoard:function(){return e.setState($)},toggleDelete:function(){return e.setState(ee)},changeDeleteTarget:this.changeDeleteTarget,deleteData:this.deleteData}},r.a.createElement(J.a.Group,{centered:!0},c),l?r.a.createElement(fe,null):r.a.createElement("div",{id:"menu_btns"},i?r.a.createElement(ge,{disabled:!!i}):null,r.a.createElement(he,null)),n?r.a.createElement(pe,null):null,a?r.a.createElement(se,{toggleCardDetail:this.toggleCardDetail}):null)}}]),t}(n.PureComponent),be=(ce="food",function(e){var t=function(t){function a(){var e,t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(f.a)(this,(e=Object(E.a)(a)).call.apply(e,[this].concat(r)))).state={loading:!0,authUser:null,data:null},t}return Object(b.a)(a,t),Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){a?t.user("".concat(a.uid,"/").concat(ce)).on("value",function(t){return e.setState(function(){return{loading:!1,data:t.val()||null,authUser:a}})}):e.setState(function(){return{loading:!1,authUser:null,data:null}})})}},{key:"componentWillUnmount",value:function(){console.log("data unmount");var e=this.props.firebase,t=this.state.authUser;this.listener(),t&&e.user("".concat(t.uid,"/").concat(ce)).off()}},{key:"render",value:function(){console.log("render data");var t=this.state,a=t.loading,n=t.authUser,l=t.data;return a?r.a.createElement(i.a,{active:!0,size:"small",inline:"centered"}):n?r.a.createElement(e,Object.assign({},this.props,{data:l})):null}}]),a}(r.a.Component);return O(t)})(Ee),ve=w(function(e){return!!e})(function(){return r.a.createElement(be,null)}),Oe=D(function(e){return r.a.createElement(c.a,null,e.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{active:!0,size:"medium",inline:"centered"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{exact:!0,path:"/",component:x}),r.a.createElement(s.a,{path:u,component:ve}),r.a.createElement(s.a,{path:d,component:R}),r.a.createElement(s.a,{path:m,component:H})))});a(520),a(521);o.a.render(r.a.createElement(C.Provider,{value:new S},r.a.createElement(Oe,null)),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.88133a44.chunk.js.map